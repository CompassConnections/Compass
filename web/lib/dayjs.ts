import dayjs from 'dayjs'
import relativeTime from 'dayjs/plugin/relativeTime'
import localizedFormat from 'dayjs/plugin/localizedFormat'
import {getLocale} from "web/lib/locale-cookie";
import {registerLocale} from "react-datepicker";

dayjs.extend(relativeTime)
dayjs.extend(localizedFormat)

export const DATEPICKER_LOCALE_IMPORTS: Record<string, () => Promise<any>> = {
  af: () => import('date-fns/locale/af'),
  ar: () => import('date-fns/locale/ar'),
  'ar-dz': () => import('date-fns/locale/ar-DZ'),
  'ar-ma': () => import('date-fns/locale/ar-MA'),
  'ar-sa': () => import('date-fns/locale/ar-SA'),
  'ar-tn': () => import('date-fns/locale/ar-TN'),
  az: () => import('date-fns/locale/az'),
  be: () => import('date-fns/locale/be'),
  bg: () => import('date-fns/locale/bg'),
  bn: () => import('date-fns/locale/bn'),
  bs: () => import('date-fns/locale/bs'),
  ca: () => import('date-fns/locale/ca'),
  cs: () => import('date-fns/locale/cs'),
  cy: () => import('date-fns/locale/cy'),
  da: () => import('date-fns/locale/da'),
  de: () => import('date-fns/locale/de'),
  'de-at': () => import('date-fns/locale/de-AT'),
  el: () => import('date-fns/locale/el'),
  en: () => import('date-fns/locale/en-US'),
  'en-au': () => import('date-fns/locale/en-AU'),
  'en-ca': () => import('date-fns/locale/en-CA'),
  'en-gb': () => import('date-fns/locale/en-GB'),
  'en-ie': () => import('date-fns/locale/en-IE'),
  'en-in': () => import('date-fns/locale/en-IN'),
  'en-nz': () => import('date-fns/locale/en-NZ'),
  eo: () => import('date-fns/locale/eo'),
  es: () => import('date-fns/locale/es'),
  et: () => import('date-fns/locale/et'),
  eu: () => import('date-fns/locale/eu'),
  fi: () => import('date-fns/locale/fi'),
  fr: () => import('date-fns/locale/fr'),
  'fr-ca': () => import('date-fns/locale/fr-CA'),
  'fr-ch': () => import('date-fns/locale/fr-CH'),
  fy: () => import('date-fns/locale/fy'),
  gd: () => import('date-fns/locale/gd'),
  gl: () => import('date-fns/locale/gl'),
  gu: () => import('date-fns/locale/gu'),
  he: () => import('date-fns/locale/he'),
  hi: () => import('date-fns/locale/hi'),
  hr: () => import('date-fns/locale/hr'),
  ht: () => import('date-fns/locale/ht'),
  hu: () => import('date-fns/locale/hu'),
  id: () => import('date-fns/locale/id'),
  is: () => import('date-fns/locale/is'),
  it: () => import('date-fns/locale/it'),
  'it-ch': () => import('date-fns/locale/it-CH'),
  ja: () => import('date-fns/locale/ja'),
  ka: () => import('date-fns/locale/ka'),
  kk: () => import('date-fns/locale/kk'),
  km: () => import('date-fns/locale/km'),
  kn: () => import('date-fns/locale/kn'),
  ko: () => import('date-fns/locale/ko'),
  lb: () => import('date-fns/locale/lb'),
  lt: () => import('date-fns/locale/lt'),
  lv: () => import('date-fns/locale/lv'),
  mk: () => import('date-fns/locale/mk'),
  mn: () => import('date-fns/locale/mn'),
  ms: () => import('date-fns/locale/ms'),
  mt: () => import('date-fns/locale/mt'),
  nb: () => import('date-fns/locale/nb'),
  nl: () => import('date-fns/locale/nl'),
  'nl-be': () => import('date-fns/locale/nl-BE'),
  nn: () => import('date-fns/locale/nn'),
  pl: () => import('date-fns/locale/pl'),
  pt: () => import('date-fns/locale/pt'),
  'pt-br': () => import('date-fns/locale/pt-BR'),
  ro: () => import('date-fns/locale/ro'),
  ru: () => import('date-fns/locale/ru'),
  sk: () => import('date-fns/locale/sk'),
  sl: () => import('date-fns/locale/sl'),
  sq: () => import('date-fns/locale/sq'),
  sr: () => import('date-fns/locale/sr'),
  sv: () => import('date-fns/locale/sv'),
  ta: () => import('date-fns/locale/ta'),
  te: () => import('date-fns/locale/te'),
  th: () => import('date-fns/locale/th'),
  tr: () => import('date-fns/locale/tr'),
  uk: () => import('date-fns/locale/uk'),
  uz: () => import('date-fns/locale/uz'),
  vi: () => import('date-fns/locale/vi'),
  zh: () => import('date-fns/locale/zh-CN'),
  'zh-cn': () => import('date-fns/locale/zh-CN'),
  'zh-hk': () => import('date-fns/locale/zh-HK'),
  'zh-tw': () => import('date-fns/locale/zh-TW'),
  zh_tw: () => import('date-fns/locale/zh-TW'),
}

export const DAYJS_LOCALE_IMPORTS: Record<string, () => Promise<unknown>> = {
  af: () => import('dayjs/locale/af'),
  am: () => import('dayjs/locale/am'),
  ar: () => import('dayjs/locale/ar'),
  'ar-dz': () => import('dayjs/locale/ar-dz'),
  'ar-iq': () => import('dayjs/locale/ar-iq'),
  'ar-kw': () => import('dayjs/locale/ar-kw'),
  'ar-ly': () => import('dayjs/locale/ar-ly'),
  'ar-ma': () => import('dayjs/locale/ar-ma'),
  'ar-sa': () => import('dayjs/locale/ar-sa'),
  'ar-tn': () => import('dayjs/locale/ar-tn'),
  az: () => import('dayjs/locale/az'),
  be: () => import('dayjs/locale/be'),
  bg: () => import('dayjs/locale/bg'),
  bi: () => import('dayjs/locale/bi'),
  bm: () => import('dayjs/locale/bm'),
  bn: () => import('dayjs/locale/bn'),
  'bn-bd': () => import('dayjs/locale/bn-bd'),
  bo: () => import('dayjs/locale/bo'),
  br: () => import('dayjs/locale/br'),
  bs: () => import('dayjs/locale/bs'),
  ca: () => import('dayjs/locale/ca'),
  cs: () => import('dayjs/locale/cs'),
  cv: () => import('dayjs/locale/cv'),
  cy: () => import('dayjs/locale/cy'),
  da: () => import('dayjs/locale/da'),
  de: () => import('dayjs/locale/de'),
  'de-at': () => import('dayjs/locale/de-at'),
  'de-ch': () => import('dayjs/locale/de-ch'),
  dv: () => import('dayjs/locale/dv'),
  el: () => import('dayjs/locale/el'),
  en: () => import('dayjs/locale/en'),
  'en-au': () => import('dayjs/locale/en-au'),
  'en-ca': () => import('dayjs/locale/en-ca'),
  'en-gb': () => import('dayjs/locale/en-gb'),
  'en-ie': () => import('dayjs/locale/en-ie'),
  'en-il': () => import('dayjs/locale/en-il'),
  'en-in': () => import('dayjs/locale/en-in'),
  'en-nz': () => import('dayjs/locale/en-nz'),
  'en-sg': () => import('dayjs/locale/en-sg'),
  'en-tt': () => import('dayjs/locale/en-tt'),
  eo: () => import('dayjs/locale/eo'),
  es: () => import('dayjs/locale/es'),
  'es-do': () => import('dayjs/locale/es-do'),
  'es-mx': () => import('dayjs/locale/es-mx'),
  'es-pr': () => import('dayjs/locale/es-pr'),
  'es-us': () => import('dayjs/locale/es-us'),
  et: () => import('dayjs/locale/et'),
  eu: () => import('dayjs/locale/eu'),
  fa: () => import('dayjs/locale/fa'),
  fi: () => import('dayjs/locale/fi'),
  fo: () => import('dayjs/locale/fo'),
  fr: () => import('dayjs/locale/fr'),
  'fr-ca': () => import('dayjs/locale/fr-ca'),
  'fr-ch': () => import('dayjs/locale/fr-ch'),
  fy: () => import('dayjs/locale/fy'),
  ga: () => import('dayjs/locale/ga'),
  gd: () => import('dayjs/locale/gd'),
  gl: () => import('dayjs/locale/gl'),
  'gom-latn': () => import('dayjs/locale/gom-latn'),
  gu: () => import('dayjs/locale/gu'),
  he: () => import('dayjs/locale/he'),
  hi: () => import('dayjs/locale/hi'),
  hr: () => import('dayjs/locale/hr'),
  ht: () => import('dayjs/locale/ht'),
  hu: () => import('dayjs/locale/hu'),
  'hy-am': () => import('dayjs/locale/hy-am'),
  id: () => import('dayjs/locale/id'),
  is: () => import('dayjs/locale/is'),
  it: () => import('dayjs/locale/it'),
  'it-ch': () => import('dayjs/locale/it-ch'),
  ja: () => import('dayjs/locale/ja'),
  jv: () => import('dayjs/locale/jv'),
  ka: () => import('dayjs/locale/ka'),
  kk: () => import('dayjs/locale/kk'),
  km: () => import('dayjs/locale/km'),
  kn: () => import('dayjs/locale/kn'),
  ko: () => import('dayjs/locale/ko'),
  ku: () => import('dayjs/locale/ku'),
  ky: () => import('dayjs/locale/ky'),
  lb: () => import('dayjs/locale/lb'),
  lo: () => import('dayjs/locale/lo'),
  lt: () => import('dayjs/locale/lt'),
  lv: () => import('dayjs/locale/lv'),
  me: () => import('dayjs/locale/me'),
  mi: () => import('dayjs/locale/mi'),
  mk: () => import('dayjs/locale/mk'),
  ml: () => import('dayjs/locale/ml'),
  mn: () => import('dayjs/locale/mn'),
  mr: () => import('dayjs/locale/mr'),
  ms: () => import('dayjs/locale/ms'),
  'ms-my': () => import('dayjs/locale/ms-my'),
  mt: () => import('dayjs/locale/mt'),
  my: () => import('dayjs/locale/my'),
  nb: () => import('dayjs/locale/nb'),
  ne: () => import('dayjs/locale/ne'),
  nl: () => import('dayjs/locale/nl'),
  'nl-be': () => import('dayjs/locale/nl-be'),
  nn: () => import('dayjs/locale/nn'),
  'oc-lnc': () => import('dayjs/locale/oc-lnc'),
  'pa-in': () => import('dayjs/locale/pa-in'),
  pl: () => import('dayjs/locale/pl'),
  pt: () => import('dayjs/locale/pt'),
  'pt-br': () => import('dayjs/locale/pt-br'),
  rn: () => import('dayjs/locale/rn'),
  ro: () => import('dayjs/locale/ro'),
  ru: () => import('dayjs/locale/ru'),
  rw: () => import('dayjs/locale/rw'),
  sd: () => import('dayjs/locale/sd'),
  se: () => import('dayjs/locale/se'),
  si: () => import('dayjs/locale/si'),
  sk: () => import('dayjs/locale/sk'),
  sl: () => import('dayjs/locale/sl'),
  sq: () => import('dayjs/locale/sq'),
  sr: () => import('dayjs/locale/sr'),
  'sr-cyrl': () => import('dayjs/locale/sr-cyrl'),
  ss: () => import('dayjs/locale/ss'),
  sv: () => import('dayjs/locale/sv'),
  'sv-fi': () => import('dayjs/locale/sv-fi'),
  sw: () => import('dayjs/locale/sw'),
  ta: () => import('dayjs/locale/ta'),
  te: () => import('dayjs/locale/te'),
  tet: () => import('dayjs/locale/tet'),
  tg: () => import('dayjs/locale/tg'),
  th: () => import('dayjs/locale/th'),
  tk: () => import('dayjs/locale/tk'),
  tlh: () => import('dayjs/locale/tlh'),
  'tl-ph': () => import('dayjs/locale/tl-ph'),
  tr: () => import('dayjs/locale/tr'),
  tzl: () => import('dayjs/locale/tzl'),
  tzm: () => import('dayjs/locale/tzm'),
  'tzm-latn': () => import('dayjs/locale/tzm-latn'),
  'ug-cn': () => import('dayjs/locale/ug-cn'),
  uk: () => import('dayjs/locale/uk'),
  ur: () => import('dayjs/locale/ur'),
  uz: () => import('dayjs/locale/uz'),
  'uz-latn': () => import('dayjs/locale/uz-latn'),
  vi: () => import('dayjs/locale/vi'),
  'x-pseudo': () => import('dayjs/locale/x-pseudo'),
  yo: () => import('dayjs/locale/yo'),
  zh: () => import('dayjs/locale/zh'),
  'zh-cn': () => import('dayjs/locale/zh-cn'),
  'zh-hk': () => import('dayjs/locale/zh-hk'),
  'zh-tw': () => import('dayjs/locale/zh-tw'),
  zh_tw: () => import('dayjs/locale/zh-tw'),
}

DAYJS_LOCALE_IMPORTS[getLocale()]?.()

export const registerDatePickerLocale = async (locale: string) => {
  if (locale && DATEPICKER_LOCALE_IMPORTS[locale]) {
    try {
      const dateFnsLocale = await DATEPICKER_LOCALE_IMPORTS[locale]()
      registerLocale(locale, dateFnsLocale.default)
    } catch (error) {
      console.warn(`Failed to register react-datepicker locale for ${locale}:`, error)
    }
  }
}
registerDatePickerLocale(getLocale())

export default dayjs
