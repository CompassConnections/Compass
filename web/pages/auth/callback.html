<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script>
        (function() {
            // Extract query string (includes ?code=...&state=...)
            const params = new URLSearchParams(window.location.search);
            const code = params.get('code');
            const state = params.get('state');
            console.log('/auth/callback code', code);

            if (code) {
                // Send code back to native app
                const deepLink = `com.compassmeet://auth?code=${encodeURIComponent(code)}&state=${encodeURIComponent(state || '')}`;
                window.location.href = deepLink;
            } else {
                document.body.textContent = 'Missing code in redirect.';
            }
        })();
    </script>
</head>
<body>
Redirecting to app...
</body>
</html>
